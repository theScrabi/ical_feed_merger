<!DOCTYPE html>
<html>

<head>
</head>

<body>

  <h1>ICAL Calendar feed merger.</h1>
  <p>
    1. Enter the ical calendar feeds you want to merge in the fields below.
    <br>
  <ol id="original_feed_list">

  </ol>
  </p>


  <p>
    2. Then grap this merged feed and subscribe to it:
    <br>
    Combined Feed: <input id='combinedFeedUrlText'>

  </p>

  <script>
    const original_feed_list = document.getElementById("original_feed_list");
    let feed_elements = []
    let feed_count = 0


    function areThereEmptyFeedElements() {
      for(li_elm of feed_elements) {
        feed_elm = li_elm.children[0]
        if (feed_elm.value.length == 0) {
          return true
        }
      }
      return false
    }


    function createNewFeedInputField() {
      feed_count += 1
      const li_elm = document.createElement("li")
      li_elm.setAttribute("id", `li_${feed_count}`)

      const input_elm = document.createElement("input")
      input_elm.setAttribute("id", `feed_${feed_count}`)
      input_elm.setAttribute("type", "text")
      input_elm.addEventListener('input', function(evnt) {
        if(!areThereEmptyFeedElements()) {
          createNewFeedInputField()
        }
      });

      li_elm.appendChild(input_elm)
      original_feed_list.appendChild(li_elm)


      feed_elements.push(li_elm)
    }

    createNewFeedInputField();
  </script>


</body>

</html>
